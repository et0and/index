"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/cacheable-request@10.2.14";
exports.ids = ["vendor-chunks/cacheable-request@10.2.14"];
exports.modules = {

/***/ "(action-browser)/./node_modules/.pnpm/cacheable-request@10.2.14/node_modules/cacheable-request/dist/index.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/.pnpm/cacheable-request@10.2.14/node_modules/cacheable-request/dist/index.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   onResponse: () => (/* binding */ onResponse)\n/* harmony export */ });\n/* harmony import */ var node_events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:events */ \"node:events\");\n/* harmony import */ var node_url__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:url */ \"node:url\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_stream__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! node:stream */ \"node:stream\");\n/* harmony import */ var normalize_url__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! normalize-url */ \"(action-browser)/./node_modules/.pnpm/normalize-url@8.0.1/node_modules/normalize-url/index.js\");\n/* harmony import */ var get_stream__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! get-stream */ \"(action-browser)/./node_modules/.pnpm/get-stream@6.0.1/node_modules/get-stream/index.js\");\n/* harmony import */ var http_cache_semantics__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! http-cache-semantics */ \"(action-browser)/./node_modules/.pnpm/http-cache-semantics@4.1.1/node_modules/http-cache-semantics/index.js\");\n/* harmony import */ var responselike__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! responselike */ \"(action-browser)/./node_modules/.pnpm/responselike@3.0.0/node_modules/responselike/index.js\");\n/* harmony import */ var keyv__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! keyv */ \"(action-browser)/./node_modules/.pnpm/keyv@4.5.4/node_modules/keyv/src/index.js\");\n/* harmony import */ var mimic_response__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! mimic-response */ \"(action-browser)/./node_modules/.pnpm/mimic-response@4.0.0/node_modules/mimic-response/index.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./types.js */ \"(action-browser)/./node_modules/.pnpm/cacheable-request@10.2.14/node_modules/cacheable-request/dist/types.js\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _types_js__WEBPACK_IMPORTED_MODULE_9__) if([\"default\",\"onResponse\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _types_js__WEBPACK_IMPORTED_MODULE_9__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n\n\n\n\n\n\n\nclass CacheableRequest {\n    constructor(cacheRequest, cacheAdapter) {\n        this.hooks = new Map();\n        this.request = () => (options, cb) => {\n            let url;\n            if (typeof options === 'string') {\n                url = normalizeUrlObject(node_url__WEBPACK_IMPORTED_MODULE_1__.parse(options));\n                options = {};\n            }\n            else if (options instanceof node_url__WEBPACK_IMPORTED_MODULE_1__.URL) {\n                url = normalizeUrlObject(node_url__WEBPACK_IMPORTED_MODULE_1__.parse(options.toString()));\n                options = {};\n            }\n            else {\n                const [pathname, ...searchParts] = (options.path ?? '').split('?');\n                const search = searchParts.length > 0\n                    ? `?${searchParts.join('?')}`\n                    : '';\n                url = normalizeUrlObject({ ...options, pathname, search });\n            }\n            options = {\n                headers: {},\n                method: 'GET',\n                cache: true,\n                strictTtl: false,\n                automaticFailover: false,\n                ...options,\n                ...urlObjectToRequestOptions(url),\n            };\n            options.headers = Object.fromEntries(entries(options.headers).map(([key, value]) => [key.toLowerCase(), value]));\n            const ee = new node_events__WEBPACK_IMPORTED_MODULE_0__();\n            const normalizedUrlString = (0,normalize_url__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(node_url__WEBPACK_IMPORTED_MODULE_1__.format(url), {\n                stripWWW: false,\n                removeTrailingSlash: false,\n                stripAuthentication: false,\n            });\n            let key = `${options.method}:${normalizedUrlString}`;\n            // POST, PATCH, and PUT requests may be cached, depending on the response\n            // cache-control headers. As a result, the body of the request should be\n            // added to the cache key in order to avoid collisions.\n            if (options.body && options.method !== undefined && ['POST', 'PATCH', 'PUT'].includes(options.method)) {\n                if (options.body instanceof node_stream__WEBPACK_IMPORTED_MODULE_3__.Readable) {\n                    // Streamed bodies should completely skip the cache because they may\n                    // or may not be hashable and in either case the stream would need to\n                    // close before the cache key could be generated.\n                    options.cache = false;\n                }\n                else {\n                    key += `:${node_crypto__WEBPACK_IMPORTED_MODULE_2__.createHash('md5').update(options.body).digest('hex')}`;\n                }\n            }\n            let revalidate = false;\n            let madeRequest = false;\n            const makeRequest = (options_) => {\n                madeRequest = true;\n                let requestErrored = false;\n                let requestErrorCallback = () => { };\n                const requestErrorPromise = new Promise(resolve => {\n                    requestErrorCallback = () => {\n                        if (!requestErrored) {\n                            requestErrored = true;\n                            resolve();\n                        }\n                    };\n                });\n                const handler = async (response) => {\n                    if (revalidate) {\n                        response.status = response.statusCode;\n                        const revalidatedPolicy = http_cache_semantics__WEBPACK_IMPORTED_MODULE_5__.fromObject(revalidate.cachePolicy).revalidatedPolicy(options_, response);\n                        if (!revalidatedPolicy.modified) {\n                            response.resume();\n                            await new Promise(resolve => {\n                                // Skipping 'error' handler cause 'error' event should't be emitted for 304 response\n                                response\n                                    .once('end', resolve);\n                            });\n                            const headers = convertHeaders(revalidatedPolicy.policy.responseHeaders());\n                            response = new responselike__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({ statusCode: revalidate.statusCode, headers, body: revalidate.body, url: revalidate.url });\n                            response.cachePolicy = revalidatedPolicy.policy;\n                            response.fromCache = true;\n                        }\n                    }\n                    if (!response.fromCache) {\n                        response.cachePolicy = new http_cache_semantics__WEBPACK_IMPORTED_MODULE_5__(options_, response, options_);\n                        response.fromCache = false;\n                    }\n                    let clonedResponse;\n                    if (options_.cache && response.cachePolicy.storable()) {\n                        clonedResponse = cloneResponse(response);\n                        (async () => {\n                            try {\n                                const bodyPromise = get_stream__WEBPACK_IMPORTED_MODULE_4__.buffer(response);\n                                await Promise.race([\n                                    requestErrorPromise,\n                                    new Promise(resolve => response.once('end', resolve)),\n                                    new Promise(resolve => response.once('close', resolve)), // eslint-disable-line no-promise-executor-return\n                                ]);\n                                const body = await bodyPromise;\n                                let value = {\n                                    url: response.url,\n                                    statusCode: response.fromCache ? revalidate.statusCode : response.statusCode,\n                                    body,\n                                    cachePolicy: response.cachePolicy.toObject(),\n                                };\n                                let ttl = options_.strictTtl ? response.cachePolicy.timeToLive() : undefined;\n                                if (options_.maxTtl) {\n                                    ttl = ttl ? Math.min(ttl, options_.maxTtl) : options_.maxTtl;\n                                }\n                                if (this.hooks.size > 0) {\n                                    /* eslint-disable no-await-in-loop */\n                                    for (const key_ of this.hooks.keys()) {\n                                        value = await this.runHook(key_, value, response);\n                                    }\n                                    /* eslint-enable no-await-in-loop */\n                                }\n                                await this.cache.set(key, value, ttl);\n                            }\n                            catch (error) {\n                                ee.emit('error', new _types_js__WEBPACK_IMPORTED_MODULE_9__.CacheError(error));\n                            }\n                        })();\n                    }\n                    else if (options_.cache && revalidate) {\n                        (async () => {\n                            try {\n                                await this.cache.delete(key);\n                            }\n                            catch (error) {\n                                ee.emit('error', new _types_js__WEBPACK_IMPORTED_MODULE_9__.CacheError(error));\n                            }\n                        })();\n                    }\n                    ee.emit('response', clonedResponse ?? response);\n                    if (typeof cb === 'function') {\n                        cb(clonedResponse ?? response);\n                    }\n                };\n                try {\n                    const request_ = this.cacheRequest(options_, handler);\n                    request_.once('error', requestErrorCallback);\n                    request_.once('abort', requestErrorCallback);\n                    request_.once('destroy', requestErrorCallback);\n                    ee.emit('request', request_);\n                }\n                catch (error) {\n                    ee.emit('error', new _types_js__WEBPACK_IMPORTED_MODULE_9__.RequestError(error));\n                }\n            };\n            (async () => {\n                const get = async (options_) => {\n                    await Promise.resolve();\n                    const cacheEntry = options_.cache ? await this.cache.get(key) : undefined;\n                    if (cacheEntry === undefined && !options_.forceRefresh) {\n                        makeRequest(options_);\n                        return;\n                    }\n                    const policy = http_cache_semantics__WEBPACK_IMPORTED_MODULE_5__.fromObject(cacheEntry.cachePolicy);\n                    if (policy.satisfiesWithoutRevalidation(options_) && !options_.forceRefresh) {\n                        const headers = convertHeaders(policy.responseHeaders());\n                        const response = new responselike__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({ statusCode: cacheEntry.statusCode, headers, body: cacheEntry.body, url: cacheEntry.url });\n                        response.cachePolicy = policy;\n                        response.fromCache = true;\n                        ee.emit('response', response);\n                        if (typeof cb === 'function') {\n                            cb(response);\n                        }\n                    }\n                    else if (policy.satisfiesWithoutRevalidation(options_) && Date.now() >= policy.timeToLive() && options_.forceRefresh) {\n                        await this.cache.delete(key);\n                        options_.headers = policy.revalidationHeaders(options_);\n                        makeRequest(options_);\n                    }\n                    else {\n                        revalidate = cacheEntry;\n                        options_.headers = policy.revalidationHeaders(options_);\n                        makeRequest(options_);\n                    }\n                };\n                const errorHandler = (error) => ee.emit('error', new _types_js__WEBPACK_IMPORTED_MODULE_9__.CacheError(error));\n                if (this.cache instanceof keyv__WEBPACK_IMPORTED_MODULE_7__) {\n                    const cachek = this.cache;\n                    cachek.once('error', errorHandler);\n                    ee.on('error', () => cachek.removeListener('error', errorHandler));\n                    ee.on('response', () => cachek.removeListener('error', errorHandler));\n                }\n                try {\n                    await get(options);\n                }\n                catch (error) {\n                    if (options.automaticFailover && !madeRequest) {\n                        makeRequest(options);\n                    }\n                    ee.emit('error', new _types_js__WEBPACK_IMPORTED_MODULE_9__.CacheError(error));\n                }\n            })();\n            return ee;\n        };\n        this.addHook = (name, fn) => {\n            if (!this.hooks.has(name)) {\n                this.hooks.set(name, fn);\n            }\n        };\n        this.removeHook = (name) => this.hooks.delete(name);\n        this.getHook = (name) => this.hooks.get(name);\n        this.runHook = async (name, ...args) => this.hooks.get(name)?.(...args);\n        if (cacheAdapter instanceof keyv__WEBPACK_IMPORTED_MODULE_7__) {\n            this.cache = cacheAdapter;\n        }\n        else if (typeof cacheAdapter === 'string') {\n            this.cache = new keyv__WEBPACK_IMPORTED_MODULE_7__({\n                uri: cacheAdapter,\n                namespace: 'cacheable-request',\n            });\n        }\n        else {\n            this.cache = new keyv__WEBPACK_IMPORTED_MODULE_7__({\n                store: cacheAdapter,\n                namespace: 'cacheable-request',\n            });\n        }\n        this.request = this.request.bind(this);\n        this.cacheRequest = cacheRequest;\n    }\n}\nconst entries = Object.entries;\nconst cloneResponse = (response) => {\n    const clone = new node_stream__WEBPACK_IMPORTED_MODULE_3__.PassThrough({ autoDestroy: false });\n    (0,mimic_response__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(response, clone);\n    return response.pipe(clone);\n};\nconst urlObjectToRequestOptions = (url) => {\n    const options = { ...url };\n    options.path = `${url.pathname || '/'}${url.search || ''}`;\n    delete options.pathname;\n    delete options.search;\n    return options;\n};\nconst normalizeUrlObject = (url) => \n// If url was parsed by url.parse or new URL:\n// - hostname will be set\n// - host will be hostname[:port]\n// - port will be set if it was explicit in the parsed string\n// Otherwise, url was from request options:\n// - hostname or host may be set\n// - host shall not have port encoded\n({\n    protocol: url.protocol,\n    auth: url.auth,\n    hostname: url.hostname || url.host || 'localhost',\n    port: url.port,\n    pathname: url.pathname,\n    search: url.search,\n});\nconst convertHeaders = (headers) => {\n    const result = [];\n    for (const name of Object.keys(headers)) {\n        result[name.toLowerCase()] = headers[name];\n    }\n    return result;\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CacheableRequest);\n\nconst onResponse = 'onResponse';\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9jYWNoZWFibGUtcmVxdWVzdEAxMC4yLjE0L25vZGVfbW9kdWxlcy9jYWNoZWFibGUtcmVxdWVzdC9kaXN0L2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBdUM7QUFDVDtBQUNHO0FBQ3NDO0FBQzlCO0FBQ047QUFDWTtBQUNYO0FBQ1o7QUFDbUI7QUFDVztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsMkNBQVk7QUFDckQ7QUFDQTtBQUNBLHdDQUF3Qyx5Q0FBVTtBQUNsRCx5Q0FBeUMsMkNBQVk7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixzQkFBc0I7QUFDaEQ7QUFDQSwyQ0FBMkMsOEJBQThCO0FBQ3pFO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix3Q0FBWTtBQUN2Qyx3Q0FBd0MsMERBQVksQ0FBQyw0Q0FBYTtBQUNsRTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IseUJBQXlCLGVBQWUsR0FBRyxvQkFBb0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsaURBQWU7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLG1EQUFpQiwyQ0FBMkM7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCw0REFBc0I7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0EsMkNBQTJDLG9EQUFRLEdBQUcsd0ZBQXdGO0FBQzlJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsaURBQVc7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsOENBQWdCO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsaURBQVU7QUFDL0Q7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsaURBQVU7QUFDL0Q7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxtREFBWTtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyw0REFBc0I7QUFDekQ7QUFDQTtBQUNBLDZDQUE2QyxvREFBUSxHQUFHLHdGQUF3RjtBQUNoSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsaURBQVU7QUFDL0UsMENBQTBDLGlDQUFJO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxpREFBVTtBQUNuRDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxpQ0FBSTtBQUN4QztBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsaUNBQUk7QUFDakM7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsNkJBQTZCLGlDQUFJO0FBQ2pDO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isb0RBQWlCLEdBQUcsb0JBQW9CO0FBQzlELElBQUksMERBQWE7QUFDakI7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCLHNCQUFzQixvQkFBb0IsRUFBRSxpQkFBaUI7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBZSxnQkFBZ0IsRUFBQztBQUNMO0FBQ3BCO0FBQ1AiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYXBoYWVsc2FsYWphLy4vbm9kZV9tb2R1bGVzLy5wbnBtL2NhY2hlYWJsZS1yZXF1ZXN0QDEwLjIuMTQvbm9kZV9tb2R1bGVzL2NhY2hlYWJsZS1yZXF1ZXN0L2Rpc3QvaW5kZXguanM/NDBmZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gJ25vZGU6ZXZlbnRzJztcbmltcG9ydCB1cmxMaWIgZnJvbSAnbm9kZTp1cmwnO1xuaW1wb3J0IGNyeXB0byBmcm9tICdub2RlOmNyeXB0byc7XG5pbXBvcnQgc3RyZWFtLCB7IFBhc3NUaHJvdWdoIGFzIFBhc3NUaHJvdWdoU3RyZWFtIH0gZnJvbSAnbm9kZTpzdHJlYW0nO1xuaW1wb3J0IG5vcm1hbGl6ZVVybCBmcm9tICdub3JtYWxpemUtdXJsJztcbmltcG9ydCBnZXRTdHJlYW0gZnJvbSAnZ2V0LXN0cmVhbSc7XG5pbXBvcnQgQ2FjaGVQb2xpY3kgZnJvbSAnaHR0cC1jYWNoZS1zZW1hbnRpY3MnO1xuaW1wb3J0IFJlc3BvbnNlIGZyb20gJ3Jlc3BvbnNlbGlrZSc7XG5pbXBvcnQgS2V5diBmcm9tICdrZXl2JztcbmltcG9ydCBtaW1pY1Jlc3BvbnNlIGZyb20gJ21pbWljLXJlc3BvbnNlJztcbmltcG9ydCB7IENhY2hlRXJyb3IsIFJlcXVlc3RFcnJvciB9IGZyb20gJy4vdHlwZXMuanMnO1xuY2xhc3MgQ2FjaGVhYmxlUmVxdWVzdCB7XG4gICAgY29uc3RydWN0b3IoY2FjaGVSZXF1ZXN0LCBjYWNoZUFkYXB0ZXIpIHtcbiAgICAgICAgdGhpcy5ob29rcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5yZXF1ZXN0ID0gKCkgPT4gKG9wdGlvbnMsIGNiKSA9PiB7XG4gICAgICAgICAgICBsZXQgdXJsO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHVybCA9IG5vcm1hbGl6ZVVybE9iamVjdCh1cmxMaWIucGFyc2Uob3B0aW9ucykpO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnMgaW5zdGFuY2VvZiB1cmxMaWIuVVJMKSB7XG4gICAgICAgICAgICAgICAgdXJsID0gbm9ybWFsaXplVXJsT2JqZWN0KHVybExpYi5wYXJzZShvcHRpb25zLnRvU3RyaW5nKCkpKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBbcGF0aG5hbWUsIC4uLnNlYXJjaFBhcnRzXSA9IChvcHRpb25zLnBhdGggPz8gJycpLnNwbGl0KCc/Jyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VhcmNoID0gc2VhcmNoUGFydHMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICA/IGA/JHtzZWFyY2hQYXJ0cy5qb2luKCc/Jyl9YFxuICAgICAgICAgICAgICAgICAgICA6ICcnO1xuICAgICAgICAgICAgICAgIHVybCA9IG5vcm1hbGl6ZVVybE9iamVjdCh7IC4uLm9wdGlvbnMsIHBhdGhuYW1lLCBzZWFyY2ggfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHt9LFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgY2FjaGU6IHRydWUsXG4gICAgICAgICAgICAgICAgc3RyaWN0VHRsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBhdXRvbWF0aWNGYWlsb3ZlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgICAgICAuLi51cmxPYmplY3RUb1JlcXVlc3RPcHRpb25zKHVybCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgb3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmZyb21FbnRyaWVzKGVudHJpZXMob3B0aW9ucy5oZWFkZXJzKS5tYXAoKFtrZXksIHZhbHVlXSkgPT4gW2tleS50b0xvd2VyQ2FzZSgpLCB2YWx1ZV0pKTtcbiAgICAgICAgICAgIGNvbnN0IGVlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZFVybFN0cmluZyA9IG5vcm1hbGl6ZVVybCh1cmxMaWIuZm9ybWF0KHVybCksIHtcbiAgICAgICAgICAgICAgICBzdHJpcFdXVzogZmFsc2UsXG4gICAgICAgICAgICAgICAgcmVtb3ZlVHJhaWxpbmdTbGFzaDogZmFsc2UsXG4gICAgICAgICAgICAgICAgc3RyaXBBdXRoZW50aWNhdGlvbjogZmFsc2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxldCBrZXkgPSBgJHtvcHRpb25zLm1ldGhvZH06JHtub3JtYWxpemVkVXJsU3RyaW5nfWA7XG4gICAgICAgICAgICAvLyBQT1NULCBQQVRDSCwgYW5kIFBVVCByZXF1ZXN0cyBtYXkgYmUgY2FjaGVkLCBkZXBlbmRpbmcgb24gdGhlIHJlc3BvbnNlXG4gICAgICAgICAgICAvLyBjYWNoZS1jb250cm9sIGhlYWRlcnMuIEFzIGEgcmVzdWx0LCB0aGUgYm9keSBvZiB0aGUgcmVxdWVzdCBzaG91bGQgYmVcbiAgICAgICAgICAgIC8vIGFkZGVkIHRvIHRoZSBjYWNoZSBrZXkgaW4gb3JkZXIgdG8gYXZvaWQgY29sbGlzaW9ucy5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmJvZHkgJiYgb3B0aW9ucy5tZXRob2QgIT09IHVuZGVmaW5lZCAmJiBbJ1BPU1QnLCAnUEFUQ0gnLCAnUFVUJ10uaW5jbHVkZXMob3B0aW9ucy5tZXRob2QpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYm9keSBpbnN0YW5jZW9mIHN0cmVhbS5SZWFkYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTdHJlYW1lZCBib2RpZXMgc2hvdWxkIGNvbXBsZXRlbHkgc2tpcCB0aGUgY2FjaGUgYmVjYXVzZSB0aGV5IG1heVxuICAgICAgICAgICAgICAgICAgICAvLyBvciBtYXkgbm90IGJlIGhhc2hhYmxlIGFuZCBpbiBlaXRoZXIgY2FzZSB0aGUgc3RyZWFtIHdvdWxkIG5lZWQgdG9cbiAgICAgICAgICAgICAgICAgICAgLy8gY2xvc2UgYmVmb3JlIHRoZSBjYWNoZSBrZXkgY291bGQgYmUgZ2VuZXJhdGVkLlxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNhY2hlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBrZXkgKz0gYDoke2NyeXB0by5jcmVhdGVIYXNoKCdtZDUnKS51cGRhdGUob3B0aW9ucy5ib2R5KS5kaWdlc3QoJ2hleCcpfWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHJldmFsaWRhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBtYWRlUmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgbWFrZVJlcXVlc3QgPSAob3B0aW9uc18pID0+IHtcbiAgICAgICAgICAgICAgICBtYWRlUmVxdWVzdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgbGV0IHJlcXVlc3RFcnJvcmVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbGV0IHJlcXVlc3RFcnJvckNhbGxiYWNrID0gKCkgPT4geyB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RFcnJvclByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEVycm9yQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlcXVlc3RFcnJvcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEVycm9yZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVyID0gYXN5bmMgKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXZhbGlkYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5zdGF0dXMgPSByZXNwb25zZS5zdGF0dXNDb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV2YWxpZGF0ZWRQb2xpY3kgPSBDYWNoZVBvbGljeS5mcm9tT2JqZWN0KHJldmFsaWRhdGUuY2FjaGVQb2xpY3kpLnJldmFsaWRhdGVkUG9saWN5KG9wdGlvbnNfLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJldmFsaWRhdGVkUG9saWN5Lm1vZGlmaWVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UucmVzdW1lKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNraXBwaW5nICdlcnJvcicgaGFuZGxlciBjYXVzZSAnZXJyb3InIGV2ZW50IHNob3VsZCd0IGJlIGVtaXR0ZWQgZm9yIDMwNCByZXNwb25zZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uY2UoJ2VuZCcsIHJlc29sdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBjb252ZXJ0SGVhZGVycyhyZXZhbGlkYXRlZFBvbGljeS5wb2xpY3kucmVzcG9uc2VIZWFkZXJzKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKHsgc3RhdHVzQ29kZTogcmV2YWxpZGF0ZS5zdGF0dXNDb2RlLCBoZWFkZXJzLCBib2R5OiByZXZhbGlkYXRlLmJvZHksIHVybDogcmV2YWxpZGF0ZS51cmwgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuY2FjaGVQb2xpY3kgPSByZXZhbGlkYXRlZFBvbGljeS5wb2xpY3k7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZnJvbUNhY2hlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLmZyb21DYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuY2FjaGVQb2xpY3kgPSBuZXcgQ2FjaGVQb2xpY3kob3B0aW9uc18sIHJlc3BvbnNlLCBvcHRpb25zXyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5mcm9tQ2FjaGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsZXQgY2xvbmVkUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zXy5jYWNoZSAmJiByZXNwb25zZS5jYWNoZVBvbGljeS5zdG9yYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9uZWRSZXNwb25zZSA9IGNsb25lUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBib2R5UHJvbWlzZSA9IGdldFN0cmVhbS5idWZmZXIocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBQcm9taXNlLnJhY2UoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEVycm9yUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gcmVzcG9uc2Uub25jZSgnZW5kJywgcmVzb2x2ZSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiByZXNwb25zZS5vbmNlKCdjbG9zZScsIHJlc29sdmUpKSwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wcm9taXNlLWV4ZWN1dG9yLXJldHVyblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYm9keSA9IGF3YWl0IGJvZHlQcm9taXNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHJlc3BvbnNlLnVybCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IHJlc3BvbnNlLmZyb21DYWNoZSA/IHJldmFsaWRhdGUuc3RhdHVzQ29kZSA6IHJlc3BvbnNlLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVQb2xpY3k6IHJlc3BvbnNlLmNhY2hlUG9saWN5LnRvT2JqZWN0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0dGwgPSBvcHRpb25zXy5zdHJpY3RUdGwgPyByZXNwb25zZS5jYWNoZVBvbGljeS50aW1lVG9MaXZlKCkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zXy5tYXhUdGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR0bCA9IHR0bCA/IE1hdGgubWluKHR0bCwgb3B0aW9uc18ubWF4VHRsKSA6IG9wdGlvbnNfLm1heFR0bDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ob29rcy5zaXplID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tYXdhaXQtaW4tbG9vcCAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXlfIG9mIHRoaXMuaG9va3Mua2V5cygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBhd2FpdCB0aGlzLnJ1bkhvb2soa2V5XywgdmFsdWUsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tYXdhaXQtaW4tbG9vcCAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY2FjaGUuc2V0KGtleSwgdmFsdWUsIHR0bCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZS5lbWl0KCdlcnJvcicsIG5ldyBDYWNoZUVycm9yKGVycm9yKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvcHRpb25zXy5jYWNoZSAmJiByZXZhbGlkYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZS5lbWl0KCdlcnJvcicsIG5ldyBDYWNoZUVycm9yKGVycm9yKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlZS5lbWl0KCdyZXNwb25zZScsIGNsb25lZFJlc3BvbnNlID8/IHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2IoY2xvbmVkUmVzcG9uc2UgPz8gcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0XyA9IHRoaXMuY2FjaGVSZXF1ZXN0KG9wdGlvbnNfLCBoYW5kbGVyKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdF8ub25jZSgnZXJyb3InLCByZXF1ZXN0RXJyb3JDYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RfLm9uY2UoJ2Fib3J0JywgcmVxdWVzdEVycm9yQ2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0Xy5vbmNlKCdkZXN0cm95JywgcmVxdWVzdEVycm9yQ2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICBlZS5lbWl0KCdyZXF1ZXN0JywgcmVxdWVzdF8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgZWUuZW1pdCgnZXJyb3InLCBuZXcgUmVxdWVzdEVycm9yKGVycm9yKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ2V0ID0gYXN5bmMgKG9wdGlvbnNfKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0gb3B0aW9uc18uY2FjaGUgPyBhd2FpdCB0aGlzLmNhY2hlLmdldChrZXkpIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVFbnRyeSA9PT0gdW5kZWZpbmVkICYmICFvcHRpb25zXy5mb3JjZVJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VSZXF1ZXN0KG9wdGlvbnNfKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwb2xpY3kgPSBDYWNoZVBvbGljeS5mcm9tT2JqZWN0KGNhY2hlRW50cnkuY2FjaGVQb2xpY3kpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9saWN5LnNhdGlzZmllc1dpdGhvdXRSZXZhbGlkYXRpb24ob3B0aW9uc18pICYmICFvcHRpb25zXy5mb3JjZVJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBjb252ZXJ0SGVhZGVycyhwb2xpY3kucmVzcG9uc2VIZWFkZXJzKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UoeyBzdGF0dXNDb2RlOiBjYWNoZUVudHJ5LnN0YXR1c0NvZGUsIGhlYWRlcnMsIGJvZHk6IGNhY2hlRW50cnkuYm9keSwgdXJsOiBjYWNoZUVudHJ5LnVybCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmNhY2hlUG9saWN5ID0gcG9saWN5O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZnJvbUNhY2hlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVlLmVtaXQoJ3Jlc3BvbnNlJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwb2xpY3kuc2F0aXNmaWVzV2l0aG91dFJldmFsaWRhdGlvbihvcHRpb25zXykgJiYgRGF0ZS5ub3coKSA+PSBwb2xpY3kudGltZVRvTGl2ZSgpICYmIG9wdGlvbnNfLmZvcmNlUmVmcmVzaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jYWNoZS5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnNfLmhlYWRlcnMgPSBwb2xpY3kucmV2YWxpZGF0aW9uSGVhZGVycyhvcHRpb25zXyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlUmVxdWVzdChvcHRpb25zXyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlID0gY2FjaGVFbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnNfLmhlYWRlcnMgPSBwb2xpY3kucmV2YWxpZGF0aW9uSGVhZGVycyhvcHRpb25zXyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlUmVxdWVzdChvcHRpb25zXyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9ySGFuZGxlciA9IChlcnJvcikgPT4gZWUuZW1pdCgnZXJyb3InLCBuZXcgQ2FjaGVFcnJvcihlcnJvcikpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhY2hlIGluc3RhbmNlb2YgS2V5dikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZWsgPSB0aGlzLmNhY2hlO1xuICAgICAgICAgICAgICAgICAgICBjYWNoZWsub25jZSgnZXJyb3InLCBlcnJvckhhbmRsZXIpO1xuICAgICAgICAgICAgICAgICAgICBlZS5vbignZXJyb3InLCAoKSA9PiBjYWNoZWsucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgZXJyb3JIYW5kbGVyKSk7XG4gICAgICAgICAgICAgICAgICAgIGVlLm9uKCdyZXNwb25zZScsICgpID0+IGNhY2hlay5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBlcnJvckhhbmRsZXIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZ2V0KG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYXV0b21hdGljRmFpbG92ZXIgJiYgIW1hZGVSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlUmVxdWVzdChvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlZS5lbWl0KCdlcnJvcicsIG5ldyBDYWNoZUVycm9yKGVycm9yKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgICAgIHJldHVybiBlZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hZGRIb29rID0gKG5hbWUsIGZuKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaG9va3MuaGFzKG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ob29rcy5zZXQobmFtZSwgZm4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlbW92ZUhvb2sgPSAobmFtZSkgPT4gdGhpcy5ob29rcy5kZWxldGUobmFtZSk7XG4gICAgICAgIHRoaXMuZ2V0SG9vayA9IChuYW1lKSA9PiB0aGlzLmhvb2tzLmdldChuYW1lKTtcbiAgICAgICAgdGhpcy5ydW5Ib29rID0gYXN5bmMgKG5hbWUsIC4uLmFyZ3MpID0+IHRoaXMuaG9va3MuZ2V0KG5hbWUpPy4oLi4uYXJncyk7XG4gICAgICAgIGlmIChjYWNoZUFkYXB0ZXIgaW5zdGFuY2VvZiBLZXl2KSB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlID0gY2FjaGVBZGFwdGVyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBjYWNoZUFkYXB0ZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlID0gbmV3IEtleXYoe1xuICAgICAgICAgICAgICAgIHVyaTogY2FjaGVBZGFwdGVyLFxuICAgICAgICAgICAgICAgIG5hbWVzcGFjZTogJ2NhY2hlYWJsZS1yZXF1ZXN0JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jYWNoZSA9IG5ldyBLZXl2KHtcbiAgICAgICAgICAgICAgICBzdG9yZTogY2FjaGVBZGFwdGVyLFxuICAgICAgICAgICAgICAgIG5hbWVzcGFjZTogJ2NhY2hlYWJsZS1yZXF1ZXN0JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVxdWVzdCA9IHRoaXMucmVxdWVzdC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmNhY2hlUmVxdWVzdCA9IGNhY2hlUmVxdWVzdDtcbiAgICB9XG59XG5jb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXM7XG5jb25zdCBjbG9uZVJlc3BvbnNlID0gKHJlc3BvbnNlKSA9PiB7XG4gICAgY29uc3QgY2xvbmUgPSBuZXcgUGFzc1Rocm91Z2hTdHJlYW0oeyBhdXRvRGVzdHJveTogZmFsc2UgfSk7XG4gICAgbWltaWNSZXNwb25zZShyZXNwb25zZSwgY2xvbmUpO1xuICAgIHJldHVybiByZXNwb25zZS5waXBlKGNsb25lKTtcbn07XG5jb25zdCB1cmxPYmplY3RUb1JlcXVlc3RPcHRpb25zID0gKHVybCkgPT4ge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7IC4uLnVybCB9O1xuICAgIG9wdGlvbnMucGF0aCA9IGAke3VybC5wYXRobmFtZSB8fCAnLyd9JHt1cmwuc2VhcmNoIHx8ICcnfWA7XG4gICAgZGVsZXRlIG9wdGlvbnMucGF0aG5hbWU7XG4gICAgZGVsZXRlIG9wdGlvbnMuc2VhcmNoO1xuICAgIHJldHVybiBvcHRpb25zO1xufTtcbmNvbnN0IG5vcm1hbGl6ZVVybE9iamVjdCA9ICh1cmwpID0+IFxuLy8gSWYgdXJsIHdhcyBwYXJzZWQgYnkgdXJsLnBhcnNlIG9yIG5ldyBVUkw6XG4vLyAtIGhvc3RuYW1lIHdpbGwgYmUgc2V0XG4vLyAtIGhvc3Qgd2lsbCBiZSBob3N0bmFtZVs6cG9ydF1cbi8vIC0gcG9ydCB3aWxsIGJlIHNldCBpZiBpdCB3YXMgZXhwbGljaXQgaW4gdGhlIHBhcnNlZCBzdHJpbmdcbi8vIE90aGVyd2lzZSwgdXJsIHdhcyBmcm9tIHJlcXVlc3Qgb3B0aW9uczpcbi8vIC0gaG9zdG5hbWUgb3IgaG9zdCBtYXkgYmUgc2V0XG4vLyAtIGhvc3Qgc2hhbGwgbm90IGhhdmUgcG9ydCBlbmNvZGVkXG4oe1xuICAgIHByb3RvY29sOiB1cmwucHJvdG9jb2wsXG4gICAgYXV0aDogdXJsLmF1dGgsXG4gICAgaG9zdG5hbWU6IHVybC5ob3N0bmFtZSB8fCB1cmwuaG9zdCB8fCAnbG9jYWxob3N0JyxcbiAgICBwb3J0OiB1cmwucG9ydCxcbiAgICBwYXRobmFtZTogdXJsLnBhdGhuYW1lLFxuICAgIHNlYXJjaDogdXJsLnNlYXJjaCxcbn0pO1xuY29uc3QgY29udmVydEhlYWRlcnMgPSAoaGVhZGVycykgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIGZvciAoY29uc3QgbmFtZSBvZiBPYmplY3Qua2V5cyhoZWFkZXJzKSkge1xuICAgICAgICByZXN1bHRbbmFtZS50b0xvd2VyQ2FzZSgpXSA9IGhlYWRlcnNbbmFtZV07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59O1xuZXhwb3J0IGRlZmF1bHQgQ2FjaGVhYmxlUmVxdWVzdDtcbmV4cG9ydCAqIGZyb20gJy4vdHlwZXMuanMnO1xuZXhwb3J0IGNvbnN0IG9uUmVzcG9uc2UgPSAnb25SZXNwb25zZSc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/cacheable-request@10.2.14/node_modules/cacheable-request/dist/index.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/cacheable-request@10.2.14/node_modules/cacheable-request/dist/types.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/.pnpm/cacheable-request@10.2.14/node_modules/cacheable-request/dist/types.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CacheError: () => (/* binding */ CacheError),\n/* harmony export */   RequestError: () => (/* binding */ RequestError)\n/* harmony export */ });\n// Type definitions for cacheable-request 6.0\n// Project: https://github.com/lukechilds/cacheable-request#readme\n// Definitions by: BendingBender <https://github.com/BendingBender>\n//                 Paul Melnikow <https://github.com/paulmelnikow>\n// Definitions: https://github.com/DefinitelyTyped/DefinitelyTyped\n// TypeScript Version: 2.3\nclass RequestError extends Error {\n    constructor(error) {\n        super(error.message);\n        Object.assign(this, error);\n    }\n}\nclass CacheError extends Error {\n    constructor(error) {\n        super(error.message);\n        Object.assign(this, error);\n    }\n}\n//# sourceMappingURL=types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9jYWNoZWFibGUtcmVxdWVzdEAxMC4yLjE0L25vZGVfbW9kdWxlcy9jYWNoZWFibGUtcmVxdWVzdC9kaXN0L3R5cGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYXBoYWVsc2FsYWphLy4vbm9kZV9tb2R1bGVzLy5wbnBtL2NhY2hlYWJsZS1yZXF1ZXN0QDEwLjIuMTQvbm9kZV9tb2R1bGVzL2NhY2hlYWJsZS1yZXF1ZXN0L2Rpc3QvdHlwZXMuanM/NTFkNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUeXBlIGRlZmluaXRpb25zIGZvciBjYWNoZWFibGUtcmVxdWVzdCA2LjBcbi8vIFByb2plY3Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9sdWtlY2hpbGRzL2NhY2hlYWJsZS1yZXF1ZXN0I3JlYWRtZVxuLy8gRGVmaW5pdGlvbnMgYnk6IEJlbmRpbmdCZW5kZXIgPGh0dHBzOi8vZ2l0aHViLmNvbS9CZW5kaW5nQmVuZGVyPlxuLy8gICAgICAgICAgICAgICAgIFBhdWwgTWVsbmlrb3cgPGh0dHBzOi8vZ2l0aHViLmNvbS9wYXVsbWVsbmlrb3c+XG4vLyBEZWZpbml0aW9uczogaHR0cHM6Ly9naXRodWIuY29tL0RlZmluaXRlbHlUeXBlZC9EZWZpbml0ZWx5VHlwZWRcbi8vIFR5cGVTY3JpcHQgVmVyc2lvbjogMi4zXG5leHBvcnQgY2xhc3MgUmVxdWVzdEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGVycm9yKSB7XG4gICAgICAgIHN1cGVyKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGVycm9yKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ2FjaGVFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihlcnJvcikge1xuICAgICAgICBzdXBlcihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBlcnJvcik7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHlwZXMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/cacheable-request@10.2.14/node_modules/cacheable-request/dist/types.js\n");

/***/ })

};
;